package controller;

import java.awt.Dialog;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JDialog;
import javax.swing.WindowConstants;

import view.GroupView;
import view.MainWindow;
import view.StudentView;
import view.SubjectView;
import view.TeacherView;

public class MainWindowController implements ActionListener{
	private MainWindow view;
	private JDialog dialog = null;
	
	public MainWindowController(MainWindow view) {
		this.view = view;
		
		this.view.addTeacherActionListener(this);
		this.view.addGroupActionListener(this);
		this.view.addStudentActionListener(this);
		this.view.addSubjectActionListener(this);
		this.view.exitActionListener(this);
	}

	@Override
	public void actionPerformed(ActionEvent e) {
		view.addTeacherActionListener(new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent e) {
				TeacherView v = new TeacherView();
				dialog = new JDialog(view.getFrame(), v.getTitle(), Dialog.ModalityType.DOCUMENT_MODAL);
				dialog.add(v);
				dialog.pack();
				dialog.setResizable(false);
				dialog.setVisible(true);
				dialog.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
			}
		});
		
		view.addGroupActionListener(new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent e) {
				GroupView g = new GroupView();
				dialog = new JDialog(view.getFrame(), g.getTitle(), Dialog.ModalityType.DOCUMENT_MODAL);
				dialog.add(g);
				dialog.pack();
				dialog.setResizable(false);
				dialog.setVisible(true);
				dialog.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
			}
		});
		
		view.addStudentActionListener(new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent e) {
				StudentView s = new StudentView();
				dialog = new JDialog(view.getFrame(), "Example", Dialog.ModalityType.DOCUMENT_MODAL);
				dialog.add(s);
				dialog.pack();
				dialog.setResizable(false);
				dialog.setVisible(true);
				dialog.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
			}
		});
		
		view.addSubjectActionListener(new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent e) {
				SubjectView s = new SubjectView();
				dialog = new JDialog(view.getFrame(), s.getTitle(), Dialog.ModalityType.DOCUMENT_MODAL);
				dialog.add(new SubjectController(s));
				dialog.pack();
				dialog.setResizable(false);
				dialog.setVisible(true);
				dialog.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
			}

		});
		
		view.exitActionListener(new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent e) {
				System.exit(0);
			}
		});
	}	
}